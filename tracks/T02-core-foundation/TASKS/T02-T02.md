# T02-T02: Write config.json template

## GOAL
Create the config.json template that defines the schema for .kiln/config.json — the project configuration file created during /kiln:init.

## ACCEPTANCE_CRITERIA
- AC-02 (DET): `templates/config.json.tmpl` is valid JSON with fields: `projectType` (string), `modelMode` (string), `tooling` (object with keys: testRunner, linter, typeChecker, buildSystem, startCommand), `preferences` (object with keys: maxRetries, waveParallelism, e2eTimeout)

## FILES
- path: templates/config.json.tmpl
  action: add
  rationale: Schema template for .kiln/config.json — created by init, read by every agent

## COMMANDS
- `node -e "const c = JSON.parse(require('fs').readFileSync('templates/config.json.tmpl','utf8')); console.log(Object.keys(c)); process.exit(c.projectType && c.modelMode && c.tooling && c.preferences ? 0 : 1)"` — validates JSON and required top-level fields

## SUMMARY
Create the file `templates/config.json.tmpl`. This is a plain JSON file (no comments — JSON doesn't support them). It serves as the default template for `.kiln/config.json` which gets created when a user runs `/kiln:init` to set up kiln in their project. Every agent in the kiln system reads this config file at runtime.

**Context for the implementer:** The `templates/` directory already exists (created in Track T01). Files under `templates/teams/` are build workflow files — do NOT touch those. This template goes directly at `templates/config.json.tmpl`.

Write this exact JSON content to the file:

```json
{
  "projectType": "greenfield",
  "modelMode": "multi-model",
  "tooling": {
    "testRunner": null,
    "linter": null,
    "typeChecker": null,
    "buildSystem": null,
    "startCommand": null
  },
  "preferences": {
    "maxRetries": 2,
    "waveParallelism": 3,
    "e2eTimeout": 30000
  }
}
```

Field semantics (for reference — these are NOT written to the file, just context for why the fields exist):

- `projectType`: One of `"greenfield"` (no existing code), `"brownfield"` (existing codebase), or `"returning"` (has .kiln/ from prior session). Detected automatically by /kiln:init.
- `modelMode`: One of `"multi-model"` (GPT models via Codex CLI available) or `"claude-only"` (no Codex CLI). Detected automatically by checking if `codex` CLI is on PATH and authenticated.
- `tooling.testRunner`: Nullable string. The detected test command, e.g. `"jest"`, `"pytest"`, `"vitest"`, `"go test"`. Null means no test runner detected.
- `tooling.linter`: Nullable string. E.g. `"eslint"`, `"ruff"`, `"golangci-lint"`. Null means none detected.
- `tooling.typeChecker`: Nullable string. E.g. `"tsc"`, `"mypy"`, `"pyright"`. Null means none detected.
- `tooling.buildSystem`: Nullable string. E.g. `"npm run build"`, `"cargo build"`, `"make"`. Null means none detected.
- `tooling.startCommand`: Nullable string. E.g. `"npm run dev"`, `"python app.py"`, `"cargo run"`. Null means none detected. Used by E2E verifier to start the app.
- `preferences.maxRetries`: Integer. Max mini-verify retries per task before halting. Default 2.
- `preferences.waveParallelism`: Integer. Max concurrent subagents per execution wave. Default 3.
- `preferences.e2eTimeout`: Integer (milliseconds). How long to wait for the app to start before declaring failure. Default 30000 (30 seconds).

The file MUST be valid JSON that `JSON.parse()` can parse. Ensure no trailing commas, no comments, proper quoting.

## ESTIMATED_DIFF
~15 lines

## RISKS
- Invalid JSON would fail AC-02 deterministic check
- Missing fields would break agents that read config.json at runtime

## ROLLBACK
- git revert <task commit>
