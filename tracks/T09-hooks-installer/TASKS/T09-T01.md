# T09-T01: Write hooks.json

## GOAL
Write the hooks registration file that tells Claude Code about kiln's lifecycle hooks. This file defines which hook events trigger which scripts, and is read by Claude Code's hook system at session start.

## ACCEPTANCE_CRITERIA
- AC-07 (DET): hooks.json is valid JSON
- AC-07b (DET): All script paths referenced in hooks.json point to files that exist (or will exist after T09-T02/T03)
- AC-07c (DET): Hook event types are valid Claude Code hook events

## FILES
- path: hooks/hooks.json
  action: add
  rationale: Hook registration file for Claude Code

## COMMANDS
- `test -f hooks/hooks.json` — file exists
- `python3 -c "import json; json.load(open('hooks/hooks.json'))"` — valid JSON
- `node -e "JSON.parse(require('fs').readFileSync('hooks/hooks.json','utf8'))"` — valid JSON (Node check)

## SUMMARY
Create the file `hooks/hooks.json`. This is a Claude Code hooks configuration file that registers lifecycle hooks.

**Context for the implementer:** Claude Code supports hooks — shell commands that run in response to lifecycle events. The hooks.json file registers which scripts run for which events. Kiln uses two hooks:
1. `on-session-start` (or equivalent Claude Code event name) — runs when a new Claude Code session begins
2. `on-task-completed` (or equivalent Claude Code event name) — runs when a task/tool-use completes

The hooks.json file format follows Claude Code's hook specification. It should be a JSON object with hook entries mapping event names to script commands.

Write the following content:

```json
{
  "hooks": [
    {
      "event": "on-session-start",
      "command": "sh hooks/scripts/on-session-start.sh",
      "description": "Rehydrate kiln state from .kiln/STATE.md on session start"
    },
    {
      "event": "on-task-completed",
      "command": "sh hooks/scripts/on-task-completed.sh",
      "description": "Run mini-verify gate after task completion"
    }
  ]
}
```

Notes:
- The exact event names may vary depending on Claude Code's hook specification. Use the most standard names. Common alternatives: `PreToolUse`, `PostToolUse`, `session_start`, etc.
- Script paths are relative to the hooks/ directory (which is installed to .claude/hooks/)
- The `command` field should use `sh` (not bash) for portability
- Keep the JSON minimal — just the event registrations

**IMPORTANT**: Check the actual Claude Code hooks documentation/specification if available. The event names and JSON structure must match what Claude Code expects. If the exact format is different from the example above, adjust accordingly. The key requirement is that the file is valid JSON and the scripts are referenced correctly.

Target ~20-30 lines.

## ESTIMATED_DIFF
~30 lines

## RISKS
- Claude Code hook event names may differ from assumed names
- Hook execution order may matter if multiple hooks register for the same event

## ROLLBACK
- git revert <task commit>
